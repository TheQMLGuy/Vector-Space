<div class="section-header">
    <span class="section-icon">üé≤</span>
    <h1 class="section-title">Statistics Lab</h1>
    <span class="badge badge-cyan">Interactive</span>
</div>

<div class="grid grid-2 gap-lg">
    <!-- Data Input Panel -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üìä Data Input</h2>
            <div class="flex gap-sm">
                <button class="btn btn-sm btn-secondary" id="btn-stats-sample">Sample Data</button>
                <button class="btn btn-sm btn-secondary" id="btn-stats-clear">Clear</button>
            </div>
        </div>

        <div class="input-group">
            <label class="input-label">Enter values (comma or newline separated)</label>
            <textarea class="input input-mono" id="stats-data-input" rows="6"
                placeholder="Enter numbers separated by commas or newlines...&#10;Example: 12, 15, 18, 22, 25, 30"></textarea>
        </div>

        <button class="btn btn-primary" id="btn-stats-analyze" style="width: 100%; margin-top: 12px;">
            Analyze Data
        </button>

        <div class="stats-quick-info" style="margin-top: 16px;">
            <div class="stat-pill">
                <span class="stat-pill-label">Count</span>
                <span class="stat-pill-value" id="stats-count">0</span>
            </div>
            <div class="stat-pill">
                <span class="stat-pill-label">Sum</span>
                <span class="stat-pill-value" id="stats-sum">-</span>
            </div>
            <div class="stat-pill">
                <span class="stat-pill-label">Min</span>
                <span class="stat-pill-value" id="stats-min">-</span>
            </div>
            <div class="stat-pill">
                <span class="stat-pill-label">Max</span>
                <span class="stat-pill-value" id="stats-max">-</span>
            </div>
        </div>
    </div>

    <!-- Central Tendency Measures -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üìê Central Tendency</h2>
            <span class="badge badge-purple">Location</span>
        </div>

        <div class="grid grid-2 gap-md">
            <div class="result-box stat-result">
                <div class="result-label">Mean (Average)</div>
                <div class="result-value" id="stats-mean">-</div>
                <div class="result-formula">Œº = Œ£x / n</div>
            </div>
            <div class="result-box stat-result">
                <div class="result-label">Median</div>
                <div class="result-value" id="stats-median">-</div>
                <div class="result-formula">Middle value</div>
            </div>
            <div class="result-box stat-result">
                <div class="result-label">Mode</div>
                <div class="result-value" id="stats-mode">-</div>
                <div class="result-formula">Most frequent</div>
            </div>
            <div class="result-box stat-result">
                <div class="result-label">Geometric Mean</div>
                <div class="result-value" id="stats-geometric-mean">-</div>
                <div class="result-formula">(‚àèx·µ¢)^(1/n)</div>
            </div>
            <div class="result-box stat-result">
                <div class="result-label">Harmonic Mean</div>
                <div class="result-value" id="stats-harmonic-mean">-</div>
                <div class="result-formula">n / Œ£(1/x·µ¢)</div>
            </div>
            <div class="result-box stat-result">
                <div class="result-label">RMS (Quadratic Mean)</div>
                <div class="result-value" id="stats-rms">-</div>
                <div class="result-formula">‚àö(Œ£x¬≤ / n)</div>
            </div>
        </div>
    </div>
</div>

<!-- Dispersion Measures -->
<div class="card" style="margin-top: 24px;">
    <div class="card-header">
        <h2 class="card-title">üìè Dispersion & Spread</h2>
        <span class="badge badge-magenta">Variability</span>
    </div>

    <div class="grid grid-4 gap-md">
        <div class="result-box stat-result">
            <div class="result-label">Range</div>
            <div class="result-value" id="stats-range">-</div>
            <div class="result-formula">max - min</div>
        </div>
        <div class="result-box stat-result">
            <div class="result-label">Variance (œÉ¬≤)</div>
            <div class="result-value" id="stats-variance">-</div>
            <div class="result-formula">Œ£(x-Œº)¬≤ / n</div>
        </div>
        <div class="result-box stat-result">
            <div class="result-label">Std Deviation (œÉ)</div>
            <div class="result-value" id="stats-std-dev">-</div>
            <div class="result-formula">‚àövariance</div>
        </div>
        <div class="result-box stat-result">
            <div class="result-label">Sample Std Dev (s)</div>
            <div class="result-value" id="stats-sample-std">-</div>
            <div class="result-formula">‚àö(Œ£(x-xÃÑ)¬≤/(n-1))</div>
        </div>
        <div class="result-box stat-result">
            <div class="result-label">Coefficient of Variation</div>
            <div class="result-value" id="stats-cv">-</div>
            <div class="result-formula">(œÉ/Œº) √ó 100%</div>
        </div>
        <div class="result-box stat-result">
            <div class="result-label">Mean Absolute Deviation</div>
            <div class="result-value" id="stats-mad">-</div>
            <div class="result-formula">Œ£|x-Œº| / n</div>
        </div>
        <div class="result-box stat-result">
            <div class="result-label">Standard Error</div>
            <div class="result-value" id="stats-se">-</div>
            <div class="result-formula">œÉ / ‚àön</div>
        </div>
        <div class="result-box stat-result">
            <div class="result-label">IQR</div>
            <div class="result-value" id="stats-iqr">-</div>
            <div class="result-formula">Q3 - Q1</div>
        </div>
    </div>
</div>

<!-- Distribution Shape -->
<div class="grid grid-2 gap-lg" style="margin-top: 24px;">
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üìà Distribution Shape</h2>
            <span class="badge badge-green">Shape</span>
        </div>

        <div class="grid grid-2 gap-md">
            <div class="result-box stat-result">
                <div class="result-label">Skewness</div>
                <div class="result-value" id="stats-skewness">-</div>
                <div class="skewness-indicator" id="skewness-indicator">
                    <div class="skew-bar"></div>
                    <div class="skew-marker" id="skew-marker"></div>
                </div>
                <div class="result-interpretation" id="skewness-interp">-</div>
            </div>
            <div class="result-box stat-result">
                <div class="result-label">Kurtosis</div>
                <div class="result-value" id="stats-kurtosis">-</div>
                <div class="kurtosis-visual" id="kurtosis-visual">
                    <div class="kurtosis-curve" id="kurtosis-curve"></div>
                </div>
                <div class="result-interpretation" id="kurtosis-interp">-</div>
            </div>
        </div>

        <div class="distribution-type" style="margin-top: 16px;">
            <div class="result-label" style="margin-bottom: 8px;">Distribution Assessment</div>
            <div class="distribution-badges" id="distribution-badges">
                <span class="dist-badge" id="dist-normal">Normal</span>
                <span class="dist-badge" id="dist-symmetric">Symmetric</span>
                <span class="dist-badge" id="dist-outliers">Outliers</span>
            </div>
        </div>
    </div>

    <!-- Quartiles & Percentiles -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üìä Quartiles & Percentiles</h2>
        </div>

        <div class="percentile-input" style="margin-bottom: 16px;">
            <div class="input-group">
                <label class="input-label">Custom Percentile</label>
                <div class="flex gap-sm">
                    <input type="number" class="input input-mono" id="custom-percentile" min="0" max="100" value="50"
                        style="width: 80px;">
                    <button class="btn btn-secondary" id="btn-calc-percentile">Calculate</button>
                    <span class="percentile-result" id="custom-percentile-result">-</span>
                </div>
            </div>
        </div>

        <div class="grid grid-4 gap-sm">
            <div class="result-box stat-result small">
                <div class="result-label">Min (P0)</div>
                <div class="result-value small" id="stats-p0">-</div>
            </div>
            <div class="result-box stat-result small">
                <div class="result-label">Q1 (P25)</div>
                <div class="result-value small" id="stats-q1">-</div>
            </div>
            <div class="result-box stat-result small">
                <div class="result-label">Q2 (P50)</div>
                <div class="result-value small" id="stats-q2">-</div>
            </div>
            <div class="result-box stat-result small">
                <div class="result-label">Q3 (P75)</div>
                <div class="result-value small" id="stats-q3">-</div>
            </div>
        </div>

        <div class="grid grid-5 gap-sm" style="margin-top: 8px;">
            <div class="result-box stat-result small">
                <div class="result-label">P10</div>
                <div class="result-value small" id="stats-p10">-</div>
            </div>
            <div class="result-box stat-result small">
                <div class="result-label">P20</div>
                <div class="result-value small" id="stats-p20">-</div>
            </div>
            <div class="result-box stat-result small">
                <div class="result-label">P80</div>
                <div class="result-value small" id="stats-p80">-</div>
            </div>
            <div class="result-box stat-result small">
                <div class="result-label">P90</div>
                <div class="result-value small" id="stats-p90">-</div>
            </div>
            <div class="result-box stat-result small">
                <div class="result-label">Max (P100)</div>
                <div class="result-value small" id="stats-p100">-</div>
            </div>
        </div>
    </div>
</div>

<!-- Visualization -->
<div class="card" style="margin-top: 24px;">
    <div class="card-header">
        <h2 class="card-title">üìâ Data Visualization</h2>
        <div class="flex gap-sm">
            <button class="btn btn-sm tab-btn active" data-viz="histogram">Histogram</button>
            <button class="btn btn-sm tab-btn" data-viz="boxplot">Box Plot</button>
            <button class="btn btn-sm tab-btn" data-viz="density">Density</button>
        </div>
    </div>

    <div class="viz-container" id="stats-viz-container" style="height: 320px;"></div>

    <div class="histogram-controls" id="histogram-controls">
        <label class="input-label">Bins:</label>
        <input type="range" id="histogram-bins" min="3" max="30" value="10" style="width: 150px;">
        <span id="bins-value">10</span>
    </div>
</div>

<!-- Probability Distributions -->
<div class="card" style="margin-top: 24px;">
    <div class="card-header">
        <h2 class="card-title">üéØ Probability Calculator</h2>
        <span class="badge badge-orange">Distributions</span>
    </div>

    <div class="tab-bar">
        <button class="tab-btn active" data-dist="normal">Normal (Z)</button>
        <button class="tab-btn" data-dist="t">Student's t</button>
        <button class="tab-btn" data-dist="chi2">Chi-Square</button>
        <button class="tab-btn" data-dist="binomial">Binomial</button>
        <button class="tab-btn" data-dist="poisson">Poisson</button>
    </div>

    <!-- Normal Distribution -->
    <div class="dist-panel active" id="panel-normal">
        <div class="grid grid-4 gap-md" style="margin-top: 16px;">
            <div class="input-group">
                <label class="input-label">Mean (Œº)</label>
                <input type="number" class="input input-mono" id="norm-mean" value="0">
            </div>
            <div class="input-group">
                <label class="input-label">Std Dev (œÉ)</label>
                <input type="number" class="input input-mono" id="norm-std" value="1">
            </div>
            <div class="input-group">
                <label class="input-label">X Value</label>
                <input type="number" class="input input-mono" id="norm-x" value="1.96">
            </div>
            <div class="input-group">
                <label class="input-label">Probability Type</label>
                <select class="select" id="norm-type">
                    <option value="less">P(X ‚â§ x)</option>
                    <option value="greater">P(X > x)</option>
                    <option value="between">P(a ‚â§ X ‚â§ b)</option>
                </select>
            </div>
        </div>
        <div class="input-group" id="norm-b-group" style="display: none; margin-top: 12px;">
            <label class="input-label">Upper bound (b)</label>
            <input type="number" class="input input-mono" id="norm-b" value="2">
        </div>
        <button class="btn btn-primary" id="btn-calc-normal" style="width: 100%; margin-top: 12px;">
            Calculate Probability
        </button>
        <div class="grid grid-3 gap-md" style="margin-top: 16px;">
            <div class="result-box">
                <div class="result-label">Z-Score</div>
                <div class="result-value" id="norm-z-result">-</div>
            </div>
            <div class="result-box">
                <div class="result-label">Probability</div>
                <div class="result-value" id="norm-prob-result">-</div>
            </div>
            <div class="result-box">
                <div class="result-label">PDF Value</div>
                <div class="result-value" id="norm-pdf-result">-</div>
            </div>
        </div>
        <div class="graph-container" id="normal-curve" style="height: 200px; margin-top: 16px;"></div>
    </div>

    <!-- Student's t Distribution -->
    <div class="dist-panel" id="panel-t">
        <div class="grid grid-3 gap-md" style="margin-top: 16px;">
            <div class="input-group">
                <label class="input-label">Degrees of Freedom</label>
                <input type="number" class="input input-mono" id="t-df" value="10" min="1">
            </div>
            <div class="input-group">
                <label class="input-label">t Value</label>
                <input type="number" class="input input-mono" id="t-value" value="2.228">
            </div>
            <div class="input-group">
                <label class="input-label">Tail Type</label>
                <select class="select" id="t-tail">
                    <option value="two">Two-tailed</option>
                    <option value="left">Left-tailed</option>
                    <option value="right">Right-tailed</option>
                </select>
            </div>
        </div>
        <button class="btn btn-primary" id="btn-calc-t" style="width: 100%; margin-top: 12px;">
            Calculate P-Value
        </button>
        <div class="grid grid-2 gap-md" style="margin-top: 16px;">
            <div class="result-box">
                <div class="result-label">P-Value</div>
                <div class="result-value" id="t-pvalue-result">-</div>
            </div>
            <div class="result-box">
                <div class="result-label">Critical Values (Œ±=0.05)</div>
                <div class="result-value" id="t-critical-result">-</div>
            </div>
        </div>
    </div>

    <!-- Chi-Square Distribution -->
    <div class="dist-panel" id="panel-chi2">
        <div class="grid grid-3 gap-md" style="margin-top: 16px;">
            <div class="input-group">
                <label class="input-label">Degrees of Freedom</label>
                <input type="number" class="input input-mono" id="chi2-df" value="5" min="1">
            </div>
            <div class="input-group">
                <label class="input-label">œá¬≤ Value</label>
                <input type="number" class="input input-mono" id="chi2-value" value="11.07">
            </div>
            <div class="input-group">
                <label class="input-label">Probability Type</label>
                <select class="select" id="chi2-type">
                    <option value="right">P(œá¬≤ > x)</option>
                    <option value="left">P(œá¬≤ ‚â§ x)</option>
                </select>
            </div>
        </div>
        <button class="btn btn-primary" id="btn-calc-chi2" style="width: 100%; margin-top: 12px;">
            Calculate
        </button>
        <div class="grid grid-2 gap-md" style="margin-top: 16px;">
            <div class="result-box">
                <div class="result-label">Probability</div>
                <div class="result-value" id="chi2-prob-result">-</div>
            </div>
            <div class="result-box">
                <div class="result-label">Critical Value (Œ±=0.05)</div>
                <div class="result-value" id="chi2-critical-result">-</div>
            </div>
        </div>
    </div>

    <!-- Binomial Distribution -->
    <div class="dist-panel" id="panel-binomial">
        <div class="grid grid-4 gap-md" style="margin-top: 16px;">
            <div class="input-group">
                <label class="input-label">n (trials)</label>
                <input type="number" class="input input-mono" id="binom-n" value="10" min="1">
            </div>
            <div class="input-group">
                <label class="input-label">p (probability)</label>
                <input type="number" class="input input-mono" id="binom-p" value="0.5" min="0" max="1" step="0.01">
            </div>
            <div class="input-group">
                <label class="input-label">k (successes)</label>
                <input type="number" class="input input-mono" id="binom-k" value="5" min="0">
            </div>
            <div class="input-group">
                <label class="input-label">Probability Type</label>
                <select class="select" id="binom-type">
                    <option value="exact">P(X = k)</option>
                    <option value="atmost">P(X ‚â§ k)</option>
                    <option value="atleast">P(X ‚â• k)</option>
                </select>
            </div>
        </div>
        <button class="btn btn-primary" id="btn-calc-binomial" style="width: 100%; margin-top: 12px;">
            Calculate
        </button>
        <div class="grid grid-3 gap-md" style="margin-top: 16px;">
            <div class="result-box">
                <div class="result-label">Probability</div>
                <div class="result-value" id="binom-prob-result">-</div>
            </div>
            <div class="result-box">
                <div class="result-label">Expected Value (E[X])</div>
                <div class="result-value" id="binom-expected-result">-</div>
            </div>
            <div class="result-box">
                <div class="result-label">Std Deviation</div>
                <div class="result-value" id="binom-std-result">-</div>
            </div>
        </div>
    </div>

    <!-- Poisson Distribution -->
    <div class="dist-panel" id="panel-poisson">
        <div class="grid grid-3 gap-md" style="margin-top: 16px;">
            <div class="input-group">
                <label class="input-label">Œª (rate)</label>
                <input type="number" class="input input-mono" id="poisson-lambda" value="5" min="0" step="0.1">
            </div>
            <div class="input-group">
                <label class="input-label">k (events)</label>
                <input type="number" class="input input-mono" id="poisson-k" value="3" min="0">
            </div>
            <div class="input-group">
                <label class="input-label">Probability Type</label>
                <select class="select" id="poisson-type">
                    <option value="exact">P(X = k)</option>
                    <option value="atmost">P(X ‚â§ k)</option>
                    <option value="atleast">P(X ‚â• k)</option>
                </select>
            </div>
        </div>
        <button class="btn btn-primary" id="btn-calc-poisson" style="width: 100%; margin-top: 12px;">
            Calculate
        </button>
        <div class="grid grid-2 gap-md" style="margin-top: 16px;">
            <div class="result-box">
                <div class="result-label">Probability</div>
                <div class="result-value" id="poisson-prob-result">-</div>
            </div>
            <div class="result-box">
                <div class="result-label">E[X] = Var(X) = Œª</div>
                <div class="result-value" id="poisson-expected-result">-</div>
            </div>
        </div>
    </div>
</div>

<!-- Confidence Intervals & Hypothesis Testing -->
<div class="grid grid-2 gap-lg" style="margin-top: 24px;">
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üéØ Confidence Interval</h2>
        </div>

        <div class="grid grid-2 gap-md">
            <div class="input-group">
                <label class="input-label">Confidence Level</label>
                <select class="select" id="ci-level">
                    <option value="0.90">90%</option>
                    <option value="0.95" selected>95%</option>
                    <option value="0.99">99%</option>
                </select>
            </div>
            <div class="input-group">
                <label class="input-label">Known Population œÉ?</label>
                <select class="select" id="ci-sigma-known">
                    <option value="no" selected>No (use t-distribution)</option>
                    <option value="yes">Yes (use z-distribution)</option>
                </select>
            </div>
        </div>

        <div class="input-group" id="ci-sigma-group" style="display: none; margin-top: 12px;">
            <label class="input-label">Population œÉ</label>
            <input type="number" class="input input-mono" id="ci-sigma" value="1">
        </div>

        <button class="btn btn-primary" id="btn-calc-ci" style="width: 100%; margin-top: 12px;">
            Calculate CI from Data
        </button>

        <div class="result-box" style="margin-top: 16px;">
            <div class="result-label">Confidence Interval for Mean</div>
            <div class="result-value" id="ci-result">-</div>
            <div class="ci-visual" id="ci-visual">
                <div class="ci-bar">
                    <div class="ci-range" id="ci-range"></div>
                    <div class="ci-mean" id="ci-mean-marker"></div>
                </div>
                <div class="ci-labels">
                    <span id="ci-lower-label">-</span>
                    <span id="ci-mean-label">-</span>
                    <span id="ci-upper-label">-</span>
                </div>
            </div>
            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                Margin of Error: <span id="ci-margin">-</span>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üî¨ Hypothesis Test (One Sample)</h2>
        </div>

        <div class="grid grid-2 gap-md">
            <div class="input-group">
                <label class="input-label">Null Hypothesis (Œº‚ÇÄ)</label>
                <input type="number" class="input input-mono" id="ht-null-mean" value="0">
            </div>
            <div class="input-group">
                <label class="input-label">Alternative Hypothesis</label>
                <select class="select" id="ht-alternative">
                    <option value="two-sided">Œº ‚â† Œº‚ÇÄ (two-sided)</option>
                    <option value="greater">Œº > Œº‚ÇÄ</option>
                    <option value="less">Œº < Œº‚ÇÄ</option>
                </select>
            </div>
        </div>

        <div class="input-group" style="margin-top: 12px;">
            <label class="input-label">Significance Level (Œ±)</label>
            <select class="select" id="ht-alpha">
                <option value="0.01">0.01</option>
                <option value="0.05" selected>0.05</option>
                <option value="0.10">0.10</option>
            </select>
        </div>

        <button class="btn btn-primary" id="btn-run-ht" style="width: 100%; margin-top: 12px;">
            Run t-Test on Data
        </button>

        <div class="grid grid-2 gap-md" style="margin-top: 16px;">
            <div class="result-box">
                <div class="result-label">t-Statistic</div>
                <div class="result-value" id="ht-t-stat">-</div>
            </div>
            <div class="result-box">
                <div class="result-label">P-Value</div>
                <div class="result-value" id="ht-pvalue">-</div>
            </div>
        </div>

        <div class="hypothesis-result" id="ht-conclusion" style="margin-top: 16px;">
            Enter data and run the test to see results
        </div>
    </div>
</div>

<!-- Z-Score Calculator -->
<div class="card" style="margin-top: 24px;">
    <div class="card-header">
        <h2 class="card-title">üìê Z-Score Analysis</h2>
    </div>

    <div class="grid grid-2 gap-lg">
        <div>
            <h3 style="font-size: 14px; margin-bottom: 12px; color: var(--text-secondary);">Z-Scores of Data Points</h3>
            <div class="z-scores-table" id="z-scores-container">
                <div class="z-scores-placeholder">Analyze data to see individual z-scores</div>
            </div>
        </div>

        <div>
            <h3 style="font-size: 14px; margin-bottom: 12px; color: var(--text-secondary);">Outlier Detection (|z| > 2)
            </h3>
            <div class="outliers-container" id="outliers-container">
                <div class="z-scores-placeholder">No outliers detected</div>
            </div>

            <div class="stats-summary" style="margin-top: 16px;">
                <div class="summary-row">
                    <span class="summary-label">Values within 1œÉ:</span>
                    <span class="summary-value" id="within-1sigma">-</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Values within 2œÉ:</span>
                    <span class="summary-value" id="within-2sigma">-</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Values within 3œÉ:</span>
                    <span class="summary-value" id="within-3sigma">-</span>
                </div>
            </div>
        </div>
    </div>
</div>